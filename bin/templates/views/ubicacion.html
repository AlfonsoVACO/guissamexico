<!DOCTYPE html>
	<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
	<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
	<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
	<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<title>Guissa | Ubicacion</title>
		<meta name="description" content="Gastronomía Mexicana Recetas Restaurantes Ubicación ">	
		
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	    <link rel="shortcut icon" href="<%= request.getContextPath() %>/images/favicon.ico" />
	  	<link rel="stylesheet" href="<%= request.getContextPath() %>/css/zerogrid.css">
		<link rel="stylesheet" href="<%= request.getContextPath() %>/css/style.css">
		<link rel="stylesheet" href="<%= request.getContextPath() %>/css/slide.css">
		<link rel="stylesheet" href="<%= request.getContextPath() %>/css/menu.css">

	    <link href="<%= request.getContextPath() %>/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		<!--[if lt IE 8]>
	       <div style=' clear: both; text-align:center; position: relative;'>
	         <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
	           <img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." />
	        </a>
	      </div>
	    <![endif]-->
	    <!--[if lt IE 9]>
			<script src="<%= request.getContextPath() %>/js/html5.js"></script>
			<script src="<%= request.getContextPath() %>/js/css3-mediaqueries.js"></script>
		<![endif]-->
	    
	</head>
	<body>
		<div class="wrap-body">

			<div class="top">
				<div class="zerogrid">
					<ul class="number f-left">
						<li class="mail"><p><a href="<%= request.getContextPath() %>/loginsesion">iniciar sesión</a></p></li>
					</ul>
					<ul class="top-social f-right">
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						<li><a href="#"><i class="fa fa-instagram"></i></a></li>
					</ul>
				</div>
			</div>
			
			<header>
				<div class="zerogrid">
					<center><div class="logo"><img src="<%= request.getContextPath() %>/images/guissa_17_2.png"></div></center>
				</div>
			</header>
			
		    <a href="#" class="nav-toggle">+</a>
		    <nav class="cmn-tile-nav">
				<ul class="clearfix">
                    <%@include file="/web/recursos/menu.jsp"  %>
				</ul>
		    </nav>
			
			<section id="container" class="sub-page">
				<div class="wrap-container zerogrid">
					<div class="crumbs">
						<ul>
							<li><a href="<%= request.getContextPath() %>/inicio">Home</a></li>
							<li><a href="<%= request.getContextPath() %>/ubicacion">Ubicación</a></li>
						</ul>
					</div>
					<div id="main-content">
						<div class="wrap-content">
							<div class="row">
								<div class="col-1-3">
									<div class="wrap-col">
										<h3>Términos</h3>
										<p>La informacón proporcionada sobre su ubicación, es sólo para mostrar los negocios que se encuentran cerca de usted, de no permitir mostrar la ubicación, los negocios de igual forma se listarán para que pueda mostrarle la ubicación de cada uno.</p>
										<h3>Nota</h3>
										<p>La información de su ubicacón, no es compartida a terceros o para usos distintos a los establecidos.</p>
									</div>
								</div>
								<div class="col-2-3">
									<div class="wrap-col">
										<button style="cursor:pointer;background-color:#654e2d;font-family: Arial, Helvetica, sans-serif;font-size: 15px;border: 1px solid #ffffff;  display: inline-block;text-decoration: none;margin: 10px 0;padding: 5px 15px;color: #fff; -webkit-border-radius: 4px;-moz-border-radius: 4px; -khtml-border-radius: 4px;border-radius: 4px;" id="detenermapa">Detener</button>
				                        <div id="info_local"></div>
				                        <input type="hidden" id="start">
				                        <input type="hidden" id="travelMode" value="DRIVING"/>
				                        <input type="hidden" id="unitSystem" value="METRIC"/>
				                        <hr>
				                        <div id="results" style="width: auto; height: 600px;" >
				                            <div style="width: 100%; height: 100%; float: left;" id="map"></div>
				                        </div>
										<!--<div class="wrap-map"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3164.289259162295!2d-120.7989351!3d37.5246781!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8091042b3386acd7%3A0x3b4a4cedc60363dd!2sMain+St%2C+Denair%2C+CA+95316%2C+Hoa+K%E1%BB%B3!5e0!3m2!1svi!2s!4v1434016649434" width="100%" height="380" frameborder="0" style="border:0"></iframe></div>-->
									</div>
								</div>
							</div>
						</div>
					</div> 
				</div>
			</section>

			<footer class="zerogrid">
				<div class="copyright">
					<div class="wrapper">
						Copyright 2015 - <a href="http://www.zerotheme.com" target="_blank" rel="nofollow">Free Html5 Templates</a> Designed by Zerotheme.com
						<ul class="quick-link f-right">
							<li><a href="#">Privacy Policy</a></li>
							<li><a href="#">Terms of Use</a></li>
						</ul>
					</div>
				</div>
			</footer>

			<script src="<%= request.getContextPath() %>/js/classie.js"></script>
			<script src="<%= request.getContextPath() %>/js/demo.js"></script>
		</div>
	</body>
	<script type="text/javascript">
        (function(){
            var contenido = document.getElementById('info_local');
            var start = document.getElementById("start");
            var directionsDisplay = null;
            var directionsService = null;
            var lon;
            var lat;
            var map=null;
            if(navigator.geolocation){
                var map = new google.maps.Map(document.getElementById('map'), {
                    center: {lat: -34.397, lng: 150.644},
                    zoom: 15
                });
                var lstmarcadores = [];
                var infoWindow = new google.maps.InfoWindow({map: map});
                
                var visor = navigator.geolocation.watchPosition(function(position) {
                    var pos = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                    };

                    infoWindow.setPosition(pos);
                    infoWindow.setContent('Ubicación encontrada.');
                    map.setCenter(pos);
                    var cadena = pos.lat +","+ pos.lng;
                    document.getElementById("contenido").value=cadena;
                    directionsDisplay = new google.maps.DirectionsRenderer();
                    directionsService = new google.maps.DirectionsService();
                    start.value=cadena;

                },
                function (objPositionError) {
                    switch(objPositionError.code){
                        case objPositionError.PERMISSION_DENIED:
                            contenido.innerHTML = "No se ha permitido el acceso a la ubicación del usuario";
                            break;
                        case objPositionError.POSITION_UNAVAILABLE:
                            contenido.innerHTML = "No se ha podido acceder a la información de su posición";
                            break;
                        case objPositionError.TIMEOUT:
                            contenido.innerHTML = "El servicio ha tardado demasiado en responder";
                            break;
                        default :
                            contenido.innerHTML = "Error desconocido";
                    }
                },{
                    maximumAge: 75000,
                    timeout: 15000
                });
                var mark , i ;
                for (i = 0; i<lstmarcadores.length ; i++) {
                    var image = {
                        url: lstmarcadores[i][3],
                        size: new google.maps.Size(71, 71),
                        origin: new google.maps.Point(0, 0),
                        anchor: new google.maps.Point(11, 16)
                    };

                    mark = new google.maps.Marker({
                        position: new google.maps.LatLng(lstmarcadores[i][1], lstmarcadores[i][2]),
                        map: map,
                        title: lstmarcadores[i][0],
                        animation: google.maps.Animation.BOUNCE,
                        icon: image
                    });
                    google.maps.event.addListener(mark,'click',(function (mark,i) {
                        return function() {
                            //Empieza  la guía

                            //59994949 5040
                            if(!start){
                                alert("Inicio requerido");
                                return;
                            }
                            var request = {
                                origin: new google.maps.LatLng(start),
                                destination: new google.maps.LatLng(lstmarcadores[i][1], lstmarcadores[i][2]),
                                travelMode: google.maps.DirectionsTravelMode[$('#travelMode').val()],
                                unitSystem: google.maps.DirectionsUnitSystem[$('#unitSystem').val()],
                                provideRouteAlternatives: true
                            };

                            directionsService.route(request, function(response, status) {
                                if (status === google.maps.DirectionsStatus.OK) {
                                    directionsDisplay.setMap(map);
                                    directionsDisplay.setPanel($("#directions_panel").get(0));
                                    directionsDisplay.setDirections(response);
                                } else {
                                    alert("Las direcciones no son avatibles entre los puntos");
                                }
                            });
                            //Termina la guía

                            infoWindow.setContent(lstmarcadores[i][0]);
                            infoWindow.open(map,mark);
                        };
                    })(mark,i));
                }
            }else{
                contenido.innerHTML = "Su navegador no soporta la API de google maps";
            }
            document.getElementById('detenermapa').onclick = function () {
                navigator.geolocation.clearWatch(visor);
            };
        })(); 
    </script>
</html>